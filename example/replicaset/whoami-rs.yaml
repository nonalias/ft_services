apiVersion: apps/v1
kind: ReplicaSet
metadata:
    name: whoami-rs
spec:
    replicas: 3
    # selector란, 아래 명세된 내용으로 Pod이 있는지 체크함.
    selector:
        matchLabels:
            type: app
            service: whoami
    # 만약 해당하는 이름의 Pod이 존재하지 않는다면, template에 명세된대로 pod을 생성해줌
    template:
        metadata:
            labels:
                type: app
                service: whoami
        spec:
            containers:
            - name: whoami
              image: subicura/whoami:1
              livenessProbe:
                  httpGet:
                      path: /
                      port: 4567
